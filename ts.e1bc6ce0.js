!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function n(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}var i=function(){function t(n){e(this,t),this.elem=document.createElement("li"),n.appendChild(this.elem),this.setInitialStyles(),this.inner=new r(this.elem)}return n(t,[{key:"setInitialStyles",value:function(){this.elem.style.listStyle="none",this.elem.style.width="78%",this.elem.style.height="78%",this.elem.style.border="2px solid",this.elem.style.display="flex",this.elem.style.justifyContent="center",this.elem.style.alignItems="center"}},{key:"fill",value:function(){this.elem.style.borderColor="#000000",this.inner.fill()}},{key:"clear",value:function(){this.elem.style.borderColor="#E0E0E0",this.inner.clear()}}]),t}(),r=function(){function t(n){e(this,t),this.elem=document.createElement("div"),n.appendChild(this.elem),this.elem.style.width="75%",this.elem.style.height="75%",this.elem.style.backgroundColor="#E0E0E0"}return n(t,[{key:"fill",value:function(){this.elem.style.backgroundColor="#000000"}},{key:"clear",value:function(){this.elem.style.backgroundColor="#E0E0E0"}}]),t}();function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=f(e);if(t){var r=f(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return s(this,n)}}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var y=function e(t,n){h(this,e),this.x=t,this.y=n},p=function(e){u(o,e);var t,n,i,r=a(o);function o(){return h(this,o),r.apply(this,arguments)}return t=o,(n=[{key:"getAbsolute",value:function(e){return new o(this.x+e.x,this.y+e.y)}}])&&l(t.prototype,n),i&&l(t,i),o}(y),m=function(e){u(n,e);var t=a(n);function n(){return h(this,n),t.apply(this,arguments)}return n}(y);function v(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var b=[new m(0,0),new m(-1,0),new m(1,0),new m(0,1)],d=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.centerPosition=new p(5,15),this.occupiedRelativePositions=b}var t,n,i;return t=e,(n=[{key:"occupiedAbsolutePositions",value:function(){var e=this;return this.occupiedRelativePositions.map((function(t){return e.centerPosition.getAbsolute(t)}))}},{key:"moveDown",value:function(){this.canMoveDown()&&(this.centerPosition.y-=1)}},{key:"canMoveDown",value:function(){return this.occupiedAbsolutePositions().every((function(e){return 0<e.y}))}}])&&v(t.prototype,n),i&&v(t,i),e}();function w(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.elem=document.createElement("ul"),t.appendChild(this.elem),this.setInitialStyles(),this.setCells(),this.currentTetrimino=new d,this.draw()}var t,n,r;return t=e,(n=[{key:"setCells",value:function(){var t=this;this.cells=Array(e.HEIGHT).fill(null).map((function(){return Array(e.WIDTH).fill(null).map((function(){return new i(t.elem)}))}))}},{key:"setInitialStyles",value:function(){this.elem.style.display="grid",this.elem.style.gridTemplateColumns="repeat(".concat(e.WIDTH,", 32px)"),this.elem.style.gridTemplateRows="repeat(".concat(e.HEIGHT,", 32px)"),this.elem.style.justifyItems="center",this.elem.style.alignItems="center"}},{key:"draw",value:function(){var t=this;this.cells.forEach((function(e){return e.forEach((function(e){return e.clear()}))})),this.currentTetrimino.occupiedAbsolutePositions().forEach((function(n){return t.cells[e.HEIGHT-1-n.y][n.x].fill()}))}},{key:"tick",value:function(){this.currentTetrimino.moveDown(),this.draw()}}])&&w(t.prototype,n),r&&w(t,r),e}();g(E,"HEIGHT",20),g(E,"WIDTH",10);var k=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.elem=document.createElement("div"),t.appendChild(this.elem),this.grid=new E(this.elem),setInterval((function(){n.grid.tick()}),500)};function C(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var P=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.elem=document.getElementById("app"),this.prepareGame()}var t,n,i;return t=e,(n=[{key:"prepareGame",value:function(){var e=this;this.game=null,document.addEventListener("keypress",(function(){e.game||(e.game=new k(e.elem))}))}}])&&C(t.prototype,n),i&&C(t,i),e}();window.onload=function(){return new P}}();
//# sourceMappingURL=ts.e1bc6ce0.js.map
