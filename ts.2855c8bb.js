!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=function(){function t(n){e(this,t),r(this,"elem",this.initialElem()),r(this,"inner",new o(this.elem)),n.appendChild(this.elem)}return n(t,[{key:"initialElem",value:function(){var e=document.createElement("li");return e.style.listStyle="none",e.style.width="78%",e.style.height="78%",e.style.border="2px solid",e.style.display="flex",e.style.justifyContent="center",e.style.alignItems="center",e}},{key:"fill",value:function(){this.elem.style.borderColor="#000000",this.inner.fill()}},{key:"clear",value:function(){this.elem.style.borderColor="#E0E0E0",this.inner.clear()}}]),t}(),o=function(){function t(n){e(this,t),this.elem=document.createElement("div"),n.appendChild(this.elem),this.elem.style.width="75%",this.elem.style.height="75%",this.elem.style.backgroundColor="#E0E0E0"}return n(t,[{key:"fill",value:function(){this.elem.style.backgroundColor="#000000"}},{key:"clear",value:function(){this.elem.style.backgroundColor="#E0E0E0"}}]),t}();function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h(e);if(t){var i=h(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f(this,n)}}function f(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var m=function e(t,n){y(this,e),this.x=t,this.y=n},p=function(e){l(o,e);var t,n,r,i=s(o);function o(){return y(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"getAbsolute",value:function(e){return new o(this.x+e.x,this.y+e.y)}}])&&a(t.prototype,n),r&&a(t,r),o}(m),v=function(e){l(n,e);var t=s(n);function n(){return y(this,n),t.apply(this,arguments)}return n}(m);function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var d=[new v(0,0),new v(-1,0),new v(1,0),new v(0,1)],w=function(){function e(t){var n,r,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,r="centerPosition",i=new p(5,15),r in n?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,this.occupiedRelativePositions=d,this.maxX=t}var t,n,r;return t=e,(n=[{key:"occupiedAbsolutePositions",value:function(){var e=this;return this.occupiedRelativePositions.map((function(t){return e.centerPosition.getAbsolute(t)}))}},{key:"moveDown",value:function(){this.move(new v(0,-1))}},{key:"moveLeft",value:function(){this.move(new v(-1,0))}},{key:"moveRight",value:function(){this.move(new v(1,0))}},{key:"move",value:function(e){var t=this.centerPosition.getAbsolute(e);this.canMoveTo(t)&&(this.centerPosition=t)}},{key:"canMoveTo",value:function(e){var t=this.occupiedRelativePositions.map((function(t){return e.getAbsolute(t)}));return this.canBeIn(t)}},{key:"rotateClockwise",value:function(){this.rotate((function(e){return new v(e.y,-e.x)}))}},{key:"rotateCounterClockwise",value:function(){this.rotate((function(e){return new v(-e.y,e.x)}))}},{key:"rotate",value:function(e){var t=this,n=this.occupiedRelativePositions.map(e),r=n.map((function(e){return t.centerPosition.getAbsolute(e)}));this.canBeIn(r)&&(this.occupiedRelativePositions=n)}},{key:"canBeIn",value:function(e){var t=this;return e.every((function(e){return 0<=e.x&&e.x<=t.maxX&&0<=e.y}))}}])&&b(t.prototype,n),r&&b(t,r),e}();function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),k(this,"elem",this.initialElem()),k(this,"cells",this.initialCells()),k(this,"currentTetrimino",new w(e.WIDTH-1)),t.appendChild(this.elem),this.draw(),document.addEventListener("keydown",(function(e){return n.onKeyDown(e)}))}var t,n,r;return t=e,(n=[{key:"initialElem",value:function(){var t=document.createElement("ul");return t.style.display="grid",t.style.gridTemplateColumns="repeat(".concat(e.WIDTH,", 32px)"),t.style.gridTemplateRows="repeat(".concat(e.HEIGHT,", 32px)"),t.style.justifyItems="center",t.style.alignItems="center",t}},{key:"initialCells",value:function(){var t=this;return Array(e.HEIGHT).fill(null).map((function(){return Array(e.WIDTH).fill(null).map((function(){return new i(t.elem)}))}))}},{key:"draw",value:function(){var t=this;this.cells.forEach((function(e){return e.forEach((function(e){return e.clear()}))})),this.currentTetrimino.occupiedAbsolutePositions().forEach((function(n){return t.cells[e.HEIGHT-1-n.y][n.x].fill()}))}},{key:"tick",value:function(){this.currentTetrimino.moveDown(),this.draw()}},{key:"onKeyDown",value:function(e){switch(e.key){case"ArrowLeft":this.currentTetrimino.moveLeft(),this.draw();break;case"ArrowRight":this.currentTetrimino.moveRight(),this.draw();break;case"d":this.currentTetrimino.rotateClockwise(),this.draw();break;case"s":this.currentTetrimino.rotateCounterClockwise(),this.draw()}}}])&&g(t.prototype,n),r&&g(t,r),e}();function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}k(E,"HEIGHT",20),k(E,"WIDTH",10);var T=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),P(this,"elem",document.createElement("div")),P(this,"grid",new E(this.elem)),t.appendChild(this.elem),setInterval((function(){n.grid.tick()}),500)};function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var O=function(){function e(){var t,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=this,n="elem",r=document.getElementById("app"),n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,this.prepareGame()}var t,n,r;return t=e,(n=[{key:"prepareGame",value:function(){var e=this;this.game=null,document.addEventListener("keypress",(function(){e.game||(e.game=new T(e.elem))}))}}])&&C(t.prototype,n),r&&C(t,r),e}();window.onload=function(){return new O}}();
//# sourceMappingURL=ts.2855c8bb.js.map
