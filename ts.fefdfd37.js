!function(){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function r(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=u(e);if(t){var r=u(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return o(this,n)}}function o(t,n){return!n||"object"!==e(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t):n}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function e(t,n){l(this,e),this.x=t,this.y=n},c=function(e){n(c,e);var i,o,u,a=r(c);function c(){return l(this,c),a.apply(this,arguments)}return i=c,(o=[{key:"getAbsolute",value:function(e){return new c(this.x+e.x,this.y+e.y)}}])&&t(i.prototype,o),u&&t(i,u),c}(a),s=function(e){n(i,e);var t=r(i);function i(){return l(this,i),t.apply(this,arguments)}return i}(a);function f(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var h=[new s(0,0),new s(-1,0),new s(1,0),new s(0,1)],y=function(){function e(t){var n,i,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,i="centerPosition",r=new c(5,15),i in n?Object.defineProperty(n,i,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[i]=r,this.occupiedRelativePositions=h,this.inGrid=t}var t,n,i;return t=e,(n=[{key:"occupiedAbsolutePositions",value:function(){var e=this;return this.occupiedRelativePositions.map((function(t){return e.centerPosition.getAbsolute(t)}))}},{key:"moveDown",value:function(){this.move(new s(0,-1))}},{key:"moveLeft",value:function(){this.move(new s(-1,0))}},{key:"moveRight",value:function(){this.move(new s(1,0))}},{key:"move",value:function(e){var t=this.centerPosition.getAbsolute(e);this.canMoveTo(t)&&(this.centerPosition=t)}},{key:"canMoveTo",value:function(e){var t=this.occupiedRelativePositions.map((function(t){return e.getAbsolute(t)}));return this.canBeIn(t)}},{key:"rotateClockwise",value:function(){this.rotate((function(e){return new s(e.y,-e.x)}))}},{key:"rotateCounterClockwise",value:function(){this.rotate((function(e){return new s(-e.y,e.x)}))}},{key:"rotate",value:function(e){var t=this,n=this.occupiedRelativePositions.map(e),i=n.map((function(e){return t.centerPosition.getAbsolute(e)}));this.canBeIn(i)&&(this.occupiedRelativePositions=n)}},{key:"canBeIn",value:function(e){return e.every(this.inGrid)}}])&&f(t.prototype,n),i&&f(t,i),e}();function m(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),v(this,"currentTetrimino",new y(this.inGrid.bind(this))),setInterval((function(){n.tick(t)}),500)}var t,n,i;return t=e,(n=[{key:"tick",value:function(e){this.currentTetrimino.moveDown(),e()}},{key:"inGrid",value:function(t){return 0<=t.x&&t.x<=e.WIDTH-1&&0<=t.y}}])&&m(t.prototype,n),i&&m(t,i),e}();function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function w(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),e}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}v(p,"HEIGHT",20),v(p,"WIDTH",10);var k=function(){function e(t){b(this,e),g(this,"elem",this.initialElem()),g(this,"innerCellView",new E(this)),t.elem.appendChild(this.elem)}return w(e,[{key:"initialElem",value:function(){var e=document.createElement("li");return e.style.listStyle="none",e.style.width="78%",e.style.height="78%",e.style.border="2px solid",e.style.display="flex",e.style.justifyContent="center",e.style.alignItems="center",e}},{key:"fill",value:function(){this.elem.style.borderColor="#000000",this.innerCellView.fill()}},{key:"clear",value:function(){this.elem.style.borderColor="#E0E0E0",this.innerCellView.clear()}}]),e}(),E=function(){function e(t){b(this,e),this.elem=document.createElement("div"),t.elem.appendChild(this.elem),this.elem.style.width="75%",this.elem.style.height="75%",this.elem.style.backgroundColor="#E0E0E0"}return w(e,[{key:"fill",value:function(){this.elem.style.backgroundColor="#000000"}},{key:"clear",value:function(){this.elem.style.backgroundColor="#E0E0E0"}}]),e}();function C(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var T=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),P(this,"model",new p(this.draw.bind(this))),P(this,"elem",this.initialElem()),P(this,"cellViews",this.initialCellViews()),t.elem.appendChild(this.elem),this.draw(),document.addEventListener("keydown",(function(e){return n.onKeyDown(e)}))}var t,n,i;return t=e,(n=[{key:"initialElem",value:function(){var e=document.createElement("ul");return e.style.display="grid",e.style.gridTemplateColumns="repeat(".concat(p.WIDTH,", 32px)"),e.style.gridTemplateRows="repeat(".concat(p.HEIGHT,", 32px)"),e.style.justifyItems="center",e.style.alignItems="center",e}},{key:"initialCellViews",value:function(){var e=this;return Array(p.HEIGHT).fill(null).map((function(){return Array(p.WIDTH).fill(null).map((function(){return new k(e)}))}))}},{key:"draw",value:function(){var e=this;this.cellViews.forEach((function(e){return e.forEach((function(e){return e.clear()}))})),this.model.currentTetrimino.occupiedAbsolutePositions().forEach((function(t){return e.cellViews[p.HEIGHT-1-t.y][t.x].fill()}))}},{key:"onKeyDown",value:function(e){switch(e.key){case"ArrowLeft":this.model.currentTetrimino.moveLeft(),this.draw();break;case"ArrowRight":this.model.currentTetrimino.moveRight(),this.draw();break;case"d":this.model.currentTetrimino.rotateClockwise(),this.draw();break;case"s":this.model.currentTetrimino.rotateCounterClockwise(),this.draw()}}}])&&C(t.prototype,n),i&&C(t,i),e}();function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var j=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),O(this,"elem",document.createElement("div")),O(this,"gridView",new T(this)),t.elem.appendChild(this.elem)};var I=function e(){var t,n,i,r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=this,n="elem",i=document.getElementById("app"),n in t?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i,document.addEventListener("keypress",(function(){r.gameView||(r.gameView=new j(r))}))};window.onload=function(){return new I}}();
//# sourceMappingURL=ts.fefdfd37.js.map
