!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var n=function n(r){var o=this;t(this,n),e(this,"initialElem",(function(){var t=document.createElement("li");return t.style.listStyle="none",t.style.width="78%",t.style.height="78%",t.style.border="2px solid",t.style.display="flex",t.style.justifyContent="center",t.style.alignItems="center",t})),e(this,"fill",(function(){o.elem.style.borderColor="#000000",o.inner.fill()})),e(this,"clear",(function(){o.elem.style.borderColor="#E0E0E0",o.inner.clear()})),this.elem=this.initialElem(),this.inner=new i(this.elem),r.appendChild(this.elem)},i=function n(i){var r=this;t(this,n),e(this,"fill",(function(){r.elem.style.backgroundColor="#000000"})),e(this,"clear",(function(){r.elem.style.backgroundColor="#E0E0E0"})),this.elem=document.createElement("div"),i.appendChild(this.elem),this.elem.style.width="75%",this.elem.style.height="75%",this.elem.style.backgroundColor="#E0E0E0"};function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=l(t);if(e){var r=l(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return c(this,n)}}function c(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?s(t):e}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(n,t);var e=a(n);function n(){var t;f(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return u(s(t=e.call.apply(e,[this].concat(r))),"moveDown",(function(){t.y-=1})),u(s(t),"moveUp",(function(){t.y+=1})),u(s(t),"moveRight",(function(){t.x+=1})),u(s(t),"moveLeft",(function(){t.x-=1})),t}return n}((function t(e,n){f(this,t),this.x=e,this.y=n}));function m(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var p={baselineFromBottom:1,patterns:[[[0,0,0,0],[0,0,1,0],[0,1,1,1],[0,0,0,0]],[[0,0,0,0],[0,0,1,0],[0,0,1,1],[0,0,1,0]],[[0,0,0,0],[0,0,0,0],[0,1,1,1],[0,0,1,0]],[[0,0,0,0],[0,0,1,0],[0,1,1,0],[0,0,1,0]]]},d=function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),m(this,"patternIndex",0),m(this,"currentPattern",(function(){return n.shape.patterns[n.patternIndex]})),m(this,"occupiedAbsolutePositions",(function(){var t=[];return n.currentPattern().forEach((function(e,i){return e.forEach((function(e,r){1==e&&t.push(new h(n.position.x+r,n.position.y+(3-i)))}))})),t})),m(this,"moveDown",(function(){n.move(n.position.moveDown,n.position.moveUp)})),m(this,"moveRight",(function(){n.move(n.position.moveRight,n.position.moveLeft)})),m(this,"moveLeft",(function(){n.move(n.position.moveLeft,n.position.moveRight)})),m(this,"rotateClockwise",(function(){n.move(n.incrementPatternIndex,n.decrementPatternIndex)})),m(this,"rotateCounterClockwise",(function(){n.move(n.decrementPatternIndex,n.incrementPatternIndex)})),m(this,"incrementPatternIndex",(function(){n.patternIndex=(n.patternIndex+1)%n.shape.patterns.length})),m(this,"decrementPatternIndex",(function(){n.patternIndex=(n.patternIndex+n.shape.patterns.length-1)%n.shape.patterns.length})),m(this,"move",(function(t,e){t(),n.canBeIn(n.occupiedAbsolutePositions())||e()})),m(this,"canBeIn",(function(t){return t.every(n.grid.within)})),this.shape=p,console.log(e.area.height),this.position=new h(1,e.area.height-1),this.grid=e};var y=function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.height=e,this.width=n};function w(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var v=function t(e){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),w(this,"area",new y(20,10)),w(this,"currentTetrimino",new d(this)),w(this,"initialElem",(function(t){var e=document.createElement("ul");return e.style.display="grid",e.style.gridTemplateColumns="repeat(".concat(t.width,", 32px)"),e.style.gridTemplateRows="repeat(".concat(t.height,", 32px)"),e.style.justifyItems="center",e.style.alignItems="center",e})),w(this,"initialCells",(function(t){return Array(t.height).fill(null).map((function(){return Array(t.width).fill(null).map((function(){return new n(i.elem)}))}))})),w(this,"draw",(function(){i.cells.forEach((function(t){return t.forEach((function(t){return t.clear()}))})),i.currentTetrimino.occupiedAbsolutePositions().forEach((function(t){i.within(t)&&i.cells[i.area.height-1-t.y][t.x].fill()}))})),w(this,"tick",(function(){i.currentTetrimino.moveDown(),i.draw()})),w(this,"onKeyDown",(function(t){switch(t.key){case"ArrowLeft":i.currentTetrimino.moveLeft(),i.draw();break;case"ArrowRight":i.currentTetrimino.moveRight(),i.draw();break;case"d":i.currentTetrimino.rotateClockwise(),i.draw();break;case"s":i.currentTetrimino.rotateCounterClockwise(),i.draw()}})),w(this,"within",(function(t){return 0<=t.x&&t.x<=i.area.width-1&&0<=t.y&&t.y<=i.area.height-1})),this.elem=this.initialElem(this.area),this.cells=this.initialCells(this.area),e.appendChild(this.elem),this.draw(),document.addEventListener("keydown",(function(t){return i.onKeyDown(t)}))};function b(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var g=function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),b(this,"elem",document.createElement("div")),b(this,"grid",new v(this.elem)),e.appendChild(this.elem),setInterval((function(){n.grid.tick()}),500)};function E(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var C=function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),E(this,"elem",document.getElementById("app")),E(this,"prepareGame",(function(){e.game=null,document.addEventListener("keypress",(function(){e.game||(e.game=new g(e.elem))}))})),this.prepareGame()};window.onload=function(){return new C}}();
//# sourceMappingURL=ts.25ce349e.js.map
