{"mappings":"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","sources":["./src/ts/cell.ts","./src/ts/position.ts","./src/ts/tetrimino.ts","./src/ts/grid.ts","./src/ts/game.ts","./src/ts/app.ts","./src/ts/index.ts"],"sourcesContent":["const FILLED_COLOR = \"#000000\";\nconst EMPTY_COLOR = \"#E0E0E0\";\n\nclass CellOuter {\n  elem: HTMLElement;\n  inner: CellInner;\n\n  constructor(parentElem) {\n    this.elem = document.createElement(\"li\");\n    parentElem.appendChild(this.elem);\n    this.setInitialStyles();\n    this.inner = new CellInner(this.elem);\n  }\n\n  setInitialStyles() {\n    this.elem.style.listStyle = \"none\";\n    this.elem.style.width = \"78%\";\n    this.elem.style.height = \"78%\";\n    this.elem.style.border = \"2px solid\";\n    this.elem.style.display = \"flex\";\n    this.elem.style.justifyContent = \"center\";\n    this.elem.style.alignItems = \"center\";\n  }\n\n  fill() {\n    this.elem.style.borderColor = FILLED_COLOR;\n    this.inner.fill();\n  }\n\n  clear() {\n    this.elem.style.borderColor = EMPTY_COLOR;\n    this.inner.clear();\n  }\n}\n\nclass CellInner {\n  elem: HTMLElement;\n\n  constructor(parentElem) {\n    this.elem = document.createElement(\"div\");\n    parentElem.appendChild(this.elem);\n\n    this.elem.style.width = \"75%\";\n    this.elem.style.height = \"75%\";\n    this.elem.style.backgroundColor = EMPTY_COLOR;\n  }\n\n  fill() {\n    this.elem.style.backgroundColor = FILLED_COLOR;\n  }\n\n  clear() {\n    this.elem.style.backgroundColor = EMPTY_COLOR;\n  }\n}\n\nexport default CellOuter;\n","class Position {\n  x: number;\n  y: number;\n\n  constructor(x, y) {\n    this.x = x;\n    this.y = y;\n  }\n}\n\nexport class AbsolutePosition extends Position {\n  getAbsolute(relativePosition: RelativePosition) {\n    return new AbsolutePosition(\n      this.x + relativePosition.x,\n      this.y + relativePosition.y\n    );\n  }\n}\n\nexport class RelativePosition extends Position {}\n","import { AbsolutePosition, RelativePosition } from \"./position\";\n\nconst tRelativePositions = [\n  new RelativePosition(0, 0),\n  new RelativePosition(-1, 0),\n  new RelativePosition(1, 0),\n  new RelativePosition(0, 1),\n];\n\nclass Tetrimino {\n  centerPosition: AbsolutePosition;\n  occupiedRelativePositions: RelativePosition[];\n\n  constructor() {\n    this.centerPosition = new AbsolutePosition(5, 15);\n    this.occupiedRelativePositions = tRelativePositions;\n  }\n\n  occupiedAbsolutePositions() {\n    return this.occupiedRelativePositions.map((relativePosition) =>\n      this.centerPosition.getAbsolute(relativePosition)\n    );\n  }\n\n  moveDown() {\n    if (!this.canMoveDown()) return;\n    this.centerPosition.y -= 1;\n  }\n\n  canMoveDown() {\n    return this.occupiedAbsolutePositions().every(\n      (occupiedAbsolutePosition) => 0 < occupiedAbsolutePosition.y\n    );\n  }\n}\n\nexport default Tetrimino;\n","import Cell from \"./cell\";\nimport Tetrimino from \"./tetrimino\";\n\nclass Grid {\n  static HEIGHT = 20;\n  static WIDTH = 10;\n\n  elem: HTMLElement;\n  cells: Cell[][];\n  currentTetrimino: Tetrimino;\n\n  constructor(parentElem) {\n    this.elem = document.createElement(\"ul\");\n    parentElem.appendChild(this.elem);\n    this.setInitialStyles();\n    this.setCells();\n    this.currentTetrimino = new Tetrimino();\n    this.draw();\n  }\n\n  setCells() {\n    this.cells = Array(Grid.HEIGHT)\n      .fill(null)\n      .map(() =>\n        Array(Grid.WIDTH)\n          .fill(null)\n          .map(() => new Cell(this.elem))\n      );\n  }\n\n  setInitialStyles() {\n    this.elem.style.display = \"grid\";\n    this.elem.style.gridTemplateColumns = `repeat(${Grid.WIDTH}, 32px)`;\n    this.elem.style.gridTemplateRows = `repeat(${Grid.HEIGHT}, 32px)`;\n    this.elem.style.justifyItems = \"center\";\n    this.elem.style.alignItems = \"center\";\n  }\n\n  draw() {\n    this.cells.forEach((cellsRow) => cellsRow.forEach((cell) => cell.clear()));\n    this.currentTetrimino\n      .occupiedAbsolutePositions()\n      .forEach((position) =>\n        this.cells[Grid.HEIGHT - 1 - position.y][position.x].fill()\n      );\n  }\n\n  tick() {\n    this.currentTetrimino.moveDown();\n    this.draw();\n  }\n}\n\nexport default Grid;\n","import Grid from \"./grid\";\n\nclass Game {\n  elem: HTMLElement;\n  grid: Grid;\n\n  constructor(parentElem) {\n    this.elem = document.createElement(\"div\");\n    parentElem.appendChild(this.elem);\n\n    this.grid = new Grid(this.elem);\n\n    setInterval(() => {\n      this.grid.tick();\n    }, 500);\n  }\n}\n\nexport default Game;\n","import Game from \"./game\";\n\nclass App {\n  game: Game | null;\n  elem: HTMLElement;\n\n  constructor() {\n    this.elem = document.getElementById(\"app\");\n    this.prepareGame();\n  }\n\n  prepareGame() {\n    this.game = null;\n    document.addEventListener(\"keypress\", () => {\n      if (this.game) return;\n      this.game = new Game(this.elem);\n    });\n  }\n}\n\nexport default App;\n","import App from \"./app\";\n\nwindow.onload = () => new App();\n"],"names":["CellOuter","parentElem","$c1f283888dc145d78e0495992940440$var$_classCallCheck","this","elem","document","createElement","appendChild","setInitialStyles","inner","CellInner","style","listStyle","width","height","border","display","justifyContent","alignItems","borderColor","fill","clear","backgroundColor","Position","x","y","$eb570feff44e7af70ef032f6391057a0$var$_classCallCheck","AbsolutePosition","relativePosition","RelativePosition","tRelativePositions","$eb570feff44e7af70ef032f6391057a0$export$RelativePosition","Tetrimino","$df028aa2f109c0c2abf209569d4910$var$_classCallCheck","centerPosition","$eb570feff44e7af70ef032f6391057a0$export$AbsolutePosition","occupiedRelativePositions","_this","map","getAbsolute","canMoveDown","occupiedAbsolutePositions","every","occupiedAbsolutePosition","Grid","$edff55f5aeba37ebe413d2da667252$var$_classCallCheck","setCells","currentTetrimino","$df028aa2f109c0c2abf209569d4910$export$default","draw","cells","Array","HEIGHT","WIDTH","$c1f283888dc145d78e0495992940440$export$default","gridTemplateColumns","concat","gridTemplateRows","justifyItems","_this2","forEach","cellsRow","cell","position","moveDown","Game","$fffca1628359435431f117ee432fa7b2$var$_classCallCheck","grid","$edff55f5aeba37ebe413d2da667252$export$default","setInterval","tick","App","$f4e96cff181c2608286fa3502e43a3e3$var$_classCallCheck","getElementById","prepareGame","game","addEventListener","$fffca1628359435431f117ee432fa7b2$export$default","window","onload","$f4e96cff181c2608286fa3502e43a3e3$export$default"],"version":3,"file":"ts.e1bc6ce0.js.map"}